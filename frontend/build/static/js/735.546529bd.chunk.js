"use strict";(self.webpackChunkethglobalistanbul=self.webpackChunkethglobalistanbul||[]).push([[735],{92108:(e,t,a)=>{a.d(t,{d:()=>D});var n=a(4942),r=a(13453),i=a(65957),o=a(688),c=a(58489),s=a(30456),l=a(62895),h=a.n(l);const d="eip155",p="solana",m="other",u=(e,t)=>{if(e===m)return null;const a=t?"number"===typeof t?t:parseInt(t,16):(e=>{if(e===d)return 1;if(e===p)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))})(e);return e===d?(e=>1===e?{chainNamespace:d,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:3===e?{chainNamespace:d,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:4===e?{chainNamespace:d,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:5===e?{chainNamespace:d,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum",decimals:18}:137===e?{chainNamespace:d,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:d,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon",decimals:18}:56===e?{chainNamespace:d,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:97===e?{chainNamespace:d,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain",decimals:18}:25===e?{chainNamespace:d,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:d,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos",decimals:18}:8217===e?{chainNamespace:d,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn",decimals:18}:null)(a):e===p?(e=>1===e?{chainNamespace:p,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana",decimals:9}:2===e?{chainNamespace:p,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana",decimals:9}:3===e?{chainNamespace:p,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana",decimals:9}:null)(a):null};class g extends o.s{constructor(e,t){super(t),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class f extends g{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new f(e,"".concat(f.messages[e],", ").concat(t))}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.fromCode(5013,e)}}(0,n.Z)(f,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class N extends g{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new N(e,"".concat(N.messages[e],". ").concat(t))}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return N.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return N.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return N.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return N.fromCode(5114,e)}static mfaEnabled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return N.fromCode(5115,e)}}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}(0,n.Z)(N,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa"});const E={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},y=C({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLFLARE:"solflare",SLOPE:"slope"},E),b=C({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},E),k=C(C({},b),y);y.TORUS_SOLANA,y.PHANTOM,y.SOLFLARE,y.SLOPE,b.TORUS_EVM,b.METAMASK,b.COINBASE;function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const T={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},A=v(v({},T),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class I extends i.Ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"sessionTime",86400),(0,n.Z)(this,"clientId",void 0),(0,n.Z)(this,"web3AuthNetwork",r.dr.MAINNET),(0,n.Z)(this,"rehydrated",!1),(0,n.Z)(this,"chainConfig",null),this.setAdapterSettings(e)}get chainConfigProxy(){return this.chainConfig?v({},this.chainConfig):null}setAdapterSettings(e){if(this.status===T.READY)return;null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId),null!==e&&void 0!==e&&e.web3AuthNetwork&&(this.web3AuthNetwork=e.web3AuthNetwork);const t=e.chainConfig;if(t){if(!t.chainNamespace)throw f.notReady("ChainNamespace is required while setting chainConfig");this.currentChainNamespace=t.chainNamespace;const e=v(v({},u(t.chainNamespace,t.chainId)||{}),t);this.chainConfig=e}}checkConnectionRequirements(){if(this.name!==k.WALLET_CONNECT_V1||this.status!==T.CONNECTING){if(this.status===T.CONNECTING)throw f.notReady("Already connecting");if(this.status===T.CONNECTED)throw N.connectionError("Already connected");if(this.status!==T.READY)throw N.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements(){if(!this.clientId)throw f.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!this.chainConfig)throw f.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.rpcTarget&&this.chainConfig.chainNamespace!==m)throw f.invalidParams("rpcTarget is required in chainConfig");if(!this.chainConfig.chainId&&this.chainConfig.chainNamespace!==m)throw f.invalidParams("chainID is required in chainConfig");if(this.status!==T.NOT_READY){if(this.status===T.CONNECTED)throw f.notReady("Already connected");if(this.status===T.READY)throw f.notReady("Adapter is already initialized")}}checkDisconnectionRequirements(){if(this.status!==T.CONNECTED)throw N.disconnectionError("Not connected with wallet")}updateAdapterData(e){this.adapterData=e,this.emit(A.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}const S="https://authjs.web3auth.io";var _=h().getLogger("web3auth-logger");function P(e){let t,a=!1,n=0;try{t=window[e],a=!0,n=t.length;const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){const e=r;return!(!e||22!==e.code&&1014!==e.code&&"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||!a||0===n)}}class D extends I{async init(e){this.chainConfig||(this.chainConfig=u(d,1))}async authenticateUser(){if(!this.provider||this.status!==T.CONNECTED)throw N.notConnectedError();const{chainNamespace:e,chainId:t}=this.chainConfig,a=await this.provider.request({method:"eth_accounts"});if(a&&a.length>0){const i=(n=a[0],r=this.name,P("localStorage")?localStorage.getItem("".concat(n.toLowerCase(),"_").concat(r)):null);if(i){if(!(e=>{const t=(0,s.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)})(i))return{idToken:i}}const o={domain:window.location.origin,uri:window.location.href,address:a[0],chainId:parseInt(t,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},l=await(async(e,t)=>{const a={payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"},n=await(0,c.v_)("".concat(S,"/siww/get"),a);if(!n.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return n.challenge})(o,e),h=await this.provider.request({method:"personal_sign",params:[l,a[0]]}),d=await(async(e,t,a,n,r,i,o)=>{const s={signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:a,issuer:n,audience:window.location.hostname,timeout:r},l=await(0,c.v_)("".concat(S,"/siww/verify"),s,{headers:{client_id:i,wallet_provider:n,web3auth_network:o}});if(!l.success)throw _.error("Failed to authenticate user, ,message verification failed",l.error),new Error("Failed to authenticate user, ,message verification failed");return l.token})(e,h,l,this.name,this.sessionTime,this.clientId,this.web3AuthNetwork);return((e,t,a)=>{P("localStorage")&&localStorage.setItem("".concat(e.toLowerCase(),"_").concat(t),a)})(a[0],this.name,d),{idToken:d}}var n,r;throw N.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const e=await this.provider.request({method:"eth_accounts"});var t,a;e&&e.length>0&&(t=e[0],a=this.name,P("localStorage")&&localStorage.removeItem("".concat(t.toLowerCase(),"_").concat(a)))}async disconnect(){this.rehydrated=!1,this.emit(A.DISCONNECTED)}}}}]);
//# sourceMappingURL=735.546529bd.chunk.js.map